---
layout: post
---

<script>
  window.onload = function(){
    function addEventHandler(target,type,fn,useCapture=false){
      if(target.addEventListener){
        target.addEventListener(type,fn,useCapture);
      }else{
        target.attachEvent("on"+type,fn);
      }
    }

    //移除监听事件
    function removeEventHandler(target,type,fn){
      if(target.removeEventListener){
        target.removeEventListener(type,fn);
      }else{
        target.detachEvent("on"+type,fn);
      }
    }
    let oTarget = document.querySelector('#u-event-target');
    let oAdd1 = document.querySelector('#u-add-event1');
    let oAdd2 = document.querySelector('#u-add-event2');
    let oRemove1 = document.querySelector('#u-remove-event1');
    let oRemove2 = document.querySelector('#u-remove-event2');
    let fn1 = () => alert('事件1')
    let fn2 = () => alert('事件2')

    addEventHandler(oAdd1, 'click', () => {
      addEventHandler(oTarget, 'click', fn1)
      alert('事件1添加完成')
    });
    addEventHandler(oAdd2, 'click', () => {
      addEventHandler(oTarget, 'click', fn2)
      alert('事件2添加完成')
    });
    addEventHandler(oRemove1, 'click', () => {
      removeEventHandler(oTarget, 'click', fn1)
      alert('事件1移除完成')
    });
    addEventHandler(oRemove2, 'click', () => {
      removeEventHandler(oTarget, 'click', fn2)
      alert('事件2移除完成')
    });
  }



</script>

<div>
  <div class="demo-wrap">
    <button id="u-event-target" class="btn">测试点我</button>
    <button id="u-add-event1" class="btn">添加事件1</button>
    <button id="u-add-event2" class="btn">添加事件2</button>
    <button id="u-remove-event1" class="btn">移除事件1</button>
    <button id="u-remove-event2" class="btn">移除事件2</button>
  </div>
  {{content}}
</div>